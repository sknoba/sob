{% extends "attendance/blank_base.html" %}
{% load static %}

{% block head %}
{% endblock head %}
<style>
    .checked-style {
        background-color: #28a745; /* Example: Green background when checked */
        border-color: #28a745;
    }
</style>
{% block main %}
<div id="main-content">
  <div class="container border border-secondary">              
        <div class="container">
            <h2 class="fw-bold text-center mt-5" style="color:#1E3A8A;">Attendance</h2>
            <div class="row text-center mb-0">
                <div class="col text-primary"><strong>Class 11</strong></div>
                <div class="col text-danger"><strong>{{date | date:""}}</strong></div>
            </div>
            <hr>
        
            <div class="container ">
               <div class="row">
                    <div class="col-lg-12">
                            <div class="my-5">
                                <div class="col-sm">
                                <button class="btn btn-primary">
                                    <i class="fa-solid fa-circle-left"></i> Back
                                </button>
                                </div>
                                <form method="POST">
                                {% csrf_token %}
                                <table class="table project-list-table align-middle table-borderless">
                                    <thead class="text-lg-start">
                                        <tr class="bg-secondary">
                                            <th scope="col">#</th>
                                            <th scope="col">Student ({{total_students}})</th>
                                            <th scope="col">Statuss</th>
                                            
                                        </tr>
                                    </thead>
                                    <tbody id="studentTableBody">
                                      {% for student in students %}
                                      <tr id="student-row-{{ student.id }}">
                                            <td>{{forloop.counter}}</td>
                                          <td>
                                            {% if student.photo %}
                                            <img src="{{student.photo.url}}" alt="" class="avatar-sm rounded-circle me-2" />
                                            {% else %}
                                            <img src="{% static "core/img/profile.png" %}" alt="" class="avatar-sm rounded-circle me-2" />
                                            {% endif %}
                                            {{student.get_full_name|truncatechars:13}}
                                          </td>
                                          
                                          <td>
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" name="attendance-{{ student.id }}" onclick="toggleRowStyle(this, '{{ student.id }}')">
                                            </div>
                                          </td>
                                      </tr>
                                      {% empty %}
                                                  <tr>
                                                      <td colspan="6">No students found.</td>
                                                  </tr>
                                      {% endfor %}
                                    </tbody>
                                </table>
                                <div class="row">
                                        <button type="submit" class="btn btn-primary">Save</button>
                                </div>
                            </form>
                          </div>
                    </div>
                </div>
            </div>
          </div>
  </div>
</div>

<!-- JS Script to Handle Toggle -->
<script>
    function toggleRowStyle(checkbox, studentId) {
        const row = document.getElementById(`student-row-${studentId}`);
        if (checkbox.checked) {
            row.style.backgroundColor = "lightgreen";  // Set background color when checked
        }else {
            row.style.backgroundColor = "red";  // Reset background color when unchecked
        }
    }
</script>

{% endblock main %}

